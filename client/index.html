<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Socket.io</title>
    </head>
  
    <body>
        <h1>Communication avec socket.io !</h1>
 
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect();
            
            socket.on("js", function(command, idreturn)
            {
                var retour;

                eval("func = " + command);

                retour = func();

                console.log("command : " + command + " , return : "  + idreturn);
                
                if(idreturn != 0) socket.emit("js.return", {"id" : idreturn, data: retour});
            });
        </script>
    </body>
</html>